<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>React App</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
      <div class="keys">
          <div data-key="65" class="key">
            <kbd>A</kbd>
            <span class="sound">DO</span>
          </div>
          <div data-key="83" class="key">
            <kbd>S</kbd>
            <span class="sound">RE</span>
          </div>
          <div data-key="68" class="key">
            <kbd>D</kbd>
            <span class="sound">ME</span>
          </div>
          <div data-key="70" class="key">
            <kbd>F</kbd>
            <span class="sound">FA</span>
          </div>
          <div data-key="71" class="key">
            <kbd>G</kbd>
            <span class="sound">SO</span>
          </div>
          <div data-key="72" class="key">
            <kbd>H</kbd>
            <span class="sound">LA</span>
          </div>
          <div data-key="74" class="key">
            <kbd>J</kbd>
            <span class="sound">SI</span>
          </div>
          <div data-key="75" class="key">
            <kbd>K</kbd>
            <span class="sound">DO</span>
          </div>
        </div>
      
        <audio data-key="65" src="pianoC.mp3"></audio>
        <audio data-key="83" src="pianoD.mp3"></audio>
        <audio data-key="68" src="pianoE.mp3"></audio>
        <audio data-key="70" src="pianoF.mp3"></audio>
        <audio data-key="71" src="pianoG.mp3"></audio>
        <audio data-key="72" src="pianoA.mp3"></audio>
        <audio data-key="74" src="pianoB.mp3"></audio>
        <audio data-key="75" src="pianoC2.mp3"></audio>

        <script>
	
            function playSounds(e){
          
              //querySelector找class audio[data-key="${變數}"]
              // ` ` es6 有的 取代'' 可加入變數
              const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
              const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
              
              if(!audio)return;
              audio.currentTime=0; //讓他一直都可以按
              key.classList.add('playing'); //增加class
              audio.play();
              
            
            }
            function removeTransition(e){
              if(e.propertyName!="transform")return;
              this.classList.remove('playing');
            }
            const keys =document.querySelectorAll('.key');
            //transition 結束時刪除class
            keys.forEach(key => key.addEventListener('transitionend',removeTransition));
            window.addEventListener('keydown',playSounds);
          </script>
  </body>
</html>